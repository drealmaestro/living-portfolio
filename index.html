<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Living Portfolio Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: Arial, sans-serif; background:#111; color:#eee; margin:0; padding:1rem; }
    h2 { margin-top:2rem; border-bottom:1px solid #333; padding-bottom:0.3rem; }
    table { width:100%; border-collapse:collapse; margin-top:1rem; }
    th, td { padding:0.5rem; border-bottom:1px solid #333; text-align:left; }
    th { background:#222; }
    tr.crypto td { background:#1a1f2b; }
    .tier { font-size:0.8rem; color:#bbb; }
    .green { color:#4caf50; }
    .yellow { color:#ffeb3b; }
    .red { color:#f44336; }
  </style>
</head>
<body>
  <h1>ðŸ“Š Living Portfolio Dashboard</h1>

  <div id="core"></div>
  <div id="swing"></div>
  <div id="spec"></div>
  <div id="catalysts"></div>
  <div id="flow"></div>
  <div id="weekly"></div>

  <script>
    async function loadData() {
      const live = await fetch("live.json").then(r=>r.json());
      const ir   = await fetch("ir-verify.json").then(r=>r.json());

      renderTable("Core Portfolio", live.core, "core");
      renderTable("Swing Sleeve (3â€“6M)", live.swing, "swing");
      renderTable("Speculative Sleeve", live.spec, "spec");

      // catalysts
      let chtml = `<h2>Upcoming Catalysts</h2><table><tr><th>Date</th><th>Ticker</th><th>Event</th></tr>`;
      (live.catalysts.company || []).forEach(ev=>{
        chtml += `<tr><td>${ev.date}</td><td>${ev.ticker||""}</td><td>${ev.label}</td></tr>`;
      });
      (live.catalysts.macro || []).forEach(ev=>{
        chtml += `<tr><td>${ev.date}</td><td>Macro</td><td>${ev.label}</td></tr>`;
      });
      chtml += `</table>`;
      document.getElementById("catalysts").innerHTML = chtml;

      // flows
      if(live.flow){
        document.getElementById("flow").innerHTML = `<h2>Flows</h2><p>${live.flow.notes||""}</p>`;
      }

      // weekly
      if(live.weekly){
        document.getElementById("weekly").innerHTML = `<h2>Weekly Note</h2><p>${live.weekly.blindspots_plan||""}</p>`;
      }
    }

    function renderTable(title, items, targetId){
      let html = `<h2>${title}</h2><table><tr><th>Ticker</th><th>Weight</th><th>Notes</th><th>Exits</th></tr>`;
      items.forEach(i=>{
        const rowClass = (i.sector==="Crypto") ? "crypto" : "";
        html += `<tr class="${rowClass}">
          <td>${i.ticker} <span class="tier">${i.badge||""}</span></td>
          <td>${i.weight||""}</td>
          <td>${i.notes||""}</td>
          <td>${i.exits||""}</td>
        </tr>`;
      });
      html += `</table>`;
      document.getElementById(targetId).innerHTML = html;
    }

    loadData();
  </script>
</body>
</html>